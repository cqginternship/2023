### Modern C++: Move Semantic. Smart Pointers
# Лабораторная работа

Лабораторная работа состот из 2-х частей.

### Smart shared pointer

Написать «умный» указатель, который будет реализовывать совместное владение объектом, используя счетчик ссылок.

```
template <class T> class smart_shared_ptr
{
   ...
};
```

Указатель должен реализовывать:
* конструктор по умолчанию;
* конструктор, в качестве параметра принимающий обычный указатель;
* copy-конструктор и copy-оператор присваивания, вызов которых не должен приводить к копироваю объектов, на которые указывает указатель;
* move-конструктор и move-оператор присваивания, которые должны передавать владение другому указателю вместо копирования;
* стандартные операторы и методы: `*`, `->`, `get`, `reset`, преобразование к `bool`.

Написать код, который продемонстрирует работу указателя, используя класс `CTrace` из лекции.

Добавить в класс `CTrace`:

* copy-конструктор;
* copy-оператор присваивания
* move-конструктор
* move-оператор присваивания.

Данные функции должны выводить на экран информацию о том, что они были вызваны.


Пример использования:

```
smart_shared_ptr<СTrace> sp1(new СTrace(1));
smart_shared_ptr<CTrace> sp2 = sp1;

// sp1.get() == sp2.get();

```

### Smart weak pointer

Написать «умный» указатель, решающий проблему циклической зависимости, которая может возникнуть при использовании `smart_shared_ptr`

```
template <class T> class smart_weak_ptr
{
   ...
};
```

Указатель должен реализовывать:
* конструктор по умолчанию;
* copy-конструктор и copy-оператор присваивания, вызов которых не должен приводить к копироваю объектов, на которые указывает указатель;
* move-конструктор и move-оператор присваивания, которые должны передавать владение другому указателю вместо копирования;
* конструктор и оператор присваивания, в качестве параметра принимающие `smart_shared_ptr`;
* метод `expired`, который возвращает true, если объект разрушен;
* метод `lock`, который возвращает `smart_shared_ptr`;
* метод `reset`.

Добавить к `smart_shared_ptr` конструктор, который принимает `smart_weak_ptr`

Написать код, который продемонстрирует работу указателя, используя класс `CTrace`.

Пример использования:

```
smart_shared_ptr<CTrace> sp1(new CTrace(1));
smart_weak_ptr<CTrace> sp2(sp1);

smart_shared_ptr<CTrace> sp3 = sp2.lock();
```
